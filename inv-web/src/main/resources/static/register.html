<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>電子發票管理系統</title>
  <!-- plugins:css -->
  <link rel="stylesheet" href="./vendors/iconfonts/mdi/css/materialdesignicons.min.css">
  <link rel="stylesheet" href="./vendors/iconfonts/puse-icons-feather/feather.css">
  <link rel="stylesheet" href="./vendors/css/vendor.bundle.base.css">
  <link rel="stylesheet" href="./vendors/css/vendor.bundle.addons.css">
  <!-- endinject -->
  <!-- plugin css for this page -->
  <!-- End plugin css for this page -->
  <!-- inject:css -->
  <link rel="stylesheet" href="./css/style.css">
  <!-- endinject -->
  <link rel="shortcut icon" href="./images/favicon.png" />

  <!-- jQuery -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <!-- e-invoice script -->
  <script type="text/javascript">
    

    // 資料物件
    // [使用者資料]
    var userPorfile = {}; 

    // ajax 的介面及實作
    var ajaxProcessor = function(path, data, callback, async) {
      // POST
      $.ajax({
        "url": path,
        "context": document.body,
        "data": data,
        "processData": true,
        "cache": false,
        "async": async
      }).done(callback);
    };

    var register  = function() {
      // 使用者資料查詢
      ajaxProcessor(
        // path
        "./user/register", 
        // params
        {
          "username": $("#username").val(),
          "cardType": $("#cardType").val(),
          "cardNo": $("#cardNo").val(),
          "cardEncrypt": $("#cardEncrypt").val()
        },
        function(data) {
          if(data!=null && data!="") {
            var loadedUserPorfile = eval("("+data+")");
            console.log(loadedUserPorfile);
            window.location.replace("./dashboard.html?user="+loadedUserPorfile.username);
          } else {
            $("#warning").css("display","block");
          }
        }, true
      );
    };

    // 網頁載入後的初始化腳本
    $(document).ready(function() {
      $("#warning").css("display","none");
    });

  </script>

</head>

<body>
  <div class="container-scroller">
    <div class="container-fluid page-body-wrapper full-page-wrapper auth-page">
      <div class="content-wrapper d-flex align-items-center auth register-bg-1 theme-one">
        <div class="row w-100">
          <div class="col-lg-4 mx-auto">
            <h2 class="text-center mb-4">註冊新帳號</h2>
            <div class="auto-form-wrapper">
              <form action="#">
                <div class="form-group">
                  <div class="input-group">
                    <input type="text" class="form-control" placeholder="輸入帳號(測試期間帳密相同)" id="username">
                    <div class="input-group-append">
                      <span class="input-group-text">
                        <i class="mdi mdi-check-circle-outline"></i>
                      </span>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <div class="input-group">
                    <input type="text" class="form-control" placeholder="卡別 (3J0002:手機條碼)" id="cardType">
                    <div class="input-group-append">
                      <span class="input-group-text">
                        <i class="mdi mdi-check-circle-outline"></i>
                      </span>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <div class="input-group">
                    <input type="text" class="form-control" placeholder="卡號" id="cardNo">
                    <div class="input-group-append">
                      <span class="input-group-text">
                        <i class="mdi mdi-check-circle-outline"></i>
                      </span>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <div class="input-group">
                    <input type="text" class="form-control" placeholder="驗證碼" id="cardEncrypt">
                    <div class="input-group-append">
                      <span class="input-group-text">
                        <i class="mdi mdi-check-circle-outline"></i>
                      </span>
                    </div>
                  </div>
                </div>
                <div class="form-group d-flex justify-content-center">
                  <div class="form-check form-check-flat mt-0">
                    <label class="form-check-label">
                      <input type="checkbox" class="form-check-input" checked> 我同意條款
                    </label>
                  </div>
                </div>
                <div class="card-body" id="warning">
                  <blockquote class="blockquote blockquote-primary">
                    <footer class="blockquote-footer">註冊失敗，帳號已存在</footer>
                  </blockquote>
                </div>
                <div class="form-group">
                  <button class="btn btn-primary submit-btn btn-block" onClick="register()">註冊</button>
                </div>
                <div class="text-block text-center my-3">
                  <span class="text-small font-weight-semibold">已經有帳號了嗎 ?</span>
                  <a href="login.html" class="text-black text-small">登入</a>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
      <!-- content-wrapper ends -->
    </div>
    <!-- page-body-wrapper ends -->
  </div>
  <!-- container-scroller -->
  <!-- plugins:js -->
  <script src="./vendors/js/vendor.bundle.base.js"></script>
  <script src="./vendors/js/vendor.bundle.addons.js"></script>
  <!-- endinject -->
  <!-- inject:js -->
  <script src="./js/off-canvas.js"></script>
  <script src="./js/hoverable-collapse.js"></script>
  <script src="./js/misc.js"></script>
  <script src="./js/settings.js"></script>
  <script src="./js/todolist.js"></script>
  <!-- endinject -->
</body>

</html>